<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta 0="<" 1="t" 2="i" 3="t" 4="l" 5="e" 6=">" 7="s" 8="q" 9="l" 10="." 11="j" 12="s" 13=" " 14="A" 15="P" 16="I" 17=" " 18="d" 19="o" 20="c" 21="u" 22="m" 23="e" 24="n" 25="t" 26="a" 27="t" 28="i" 29="o" 30="n" 31="<" 32="/" 33="t" 34="i" 35="t" 36="l" 37="e" 38=">"><meta 0="<" 1="m" 2="e" 3="t" 4="a" 5=" " 6="n" 7="a" 8="m" 9="e" 10="=" 11="" 12="a" 13="u" 14="t" 15="h" 16="o" 17="r" 18="" 19=" " 20="c" 21="o" 22="n" 23="t" 24="e" 25="n" 26="t" 27="=" 28="" 29="O" 30="p" 31="h" 32="i" 33="r" 34=" " 35="L" 36="o" 37="j" 38="k" 39="i" 40="n" 41="e" 42="" 43=">"><meta 0="<" 1="m" 2="e" 3="t" 4="a" 5=" " 6="n" 7="a" 8="m" 9="e" 10="=" 11="" 12="d" 13="e" 14="s" 15="c" 16="r" 17="i" 18="p" 19="t" 20="i" 21="o" 22="n" 23="" 24=" " 25="c" 26="o" 27="n" 28="t" 29="e" 30="n" 31="t" 32="=" 33="" 34="D" 35="o" 36="c" 37="u" 38="m" 39="e" 40="n" 41="t" 42="a" 43="t" 44="i" 45="o" 46="n" 47=" " 48="f" 49="o" 50="r" 51=" " 52="s" 53="q" 54="l" 55="." 56="j" 57="s" 58=":" 59=" " 60="a" 61="n" 62=" " 63="i" 64="n" 65="-" 66="m" 67="e" 68="m" 69="o" 70="r" 71="y" 72=" " 73="S" 74="Q" 75="L" 76=" " 77="d" 78="a" 79="t" 80="a" 81="b" 82="a" 83="s" 84="e" 85=" " 86="f" 87="o" 88="r" 89=" " 90="t" 91="h" 92="e" 93=" " 94="b" 95="r" 96="o" 97="w" 98="s" 99="e" 100="r" 101=" " 102="b" 103="a" 104="s" 105="e" 106="d" 107=" " 108="o" 109="n" 110=" " 111="S" 112="Q" 113="L" 114="i" 115="t" 116="e" 117="." 118="" 119=">"><title>Class: Database</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><a href="/" class="sidebar-title sidebar-title-anchor">sql.js</a><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-modules"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-SqlJs.html">SqlJs</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="Database.html">Database</a></div><div class="sidebar-section-children"><a href="Statement.html">Statement</a></div><div class="sidebar-section-children"><a href="StatementIterator.html">StatementIterator</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#SqlJs">SqlJs</a></div><div class="sidebar-section-children"><a href="global.html#SqlJsConfig">SqlJsConfig</a></div><div class="sidebar-section-children"><a href="global.html#initSqlJs">initSqlJs</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"><div class="navbar-item"><a id="" href="https://sql.js.org/" target="">Website</a></div><div class="navbar-item"><a id="" href="https://github.com/sql-js/sql.js" target="">Github</a></div><div class="navbar-item"><a id="" href="https://sql.js.org/examples/GUI/" target="">Demo</a></div></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section><header><h1 id="Database-title" class="has-anchor">Database</h1><div class="class-description"><p>Represents an SQLite database</p></div></header><article><div class="container-overview"><h2 id="constructor" class="has-anchor">Constructor</h2><h3 class="name has-anchor" id="Database"><span class="type-signature"></span>new Database<span class="signature">(data)</span></h3><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>data</code></td><td class="type"><span class="param-type">Array.&lt;number></span></td><td class="description last"><p>An array of bytes representing an SQLite database file</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line829">line 829</a></li></ul></dd></div></dl></div><h2 id="methods" class="subsection-title has-anchor">Methods</h2><h3 class="name has-anchor" id="%5B%22close%22%5D"><span class="type-signature"></span>["close"]<span class="signature">()</span></h3><div class="description"><p>Close the database, and all associated prepared statements. The memory associated to the database and all associated statements will be freed.</p><p><strong>Warning</strong>: A statement belonging to a database that has been closed cannot be used anymore.</p><p>Databases <strong>must</strong> be closed when you're finished with them, or the memory consumption will grow forever</p></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line1113">line 1113</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="%5B%22create_aggregate%22%5D"><span class="type-signature"></span>["create_aggregate"]<span class="signature">(name, aggregateFunctions)</span><span class="type-signature"> &rarr; {<a href="Database.html">Database</a>}</span></h3><div class="description"><p>Register a custom aggregate with SQLite</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>name</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><p>the name of the aggregate as referenced in SQL statements.</p></td></tr><tr><td class="name"><code>aggregateFunctions</code></td><td class="type"><span class="param-type">object</span></td><td class="description last"><p>object containing at least a step function.</p><h6>Properties</h6><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>init=</code></td><td class="type"><span class="param-type">function</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>a function receiving no arguments and returning an initial value for the aggregate function. The initial value will be null if this key is omitted.</p></td></tr><tr><td class="name"><code>step</code></td><td class="type"><span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>a function receiving the current state and a value to aggregate and returning a new state. Will receive the value from init for the first step.</p></td></tr><tr><td class="name"><code>finalize=</code></td><td class="type"><span class="param-type">function</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>a function returning the result of the aggregate function given its final state. If omitted, the value returned by the last step will be used as the final value.</p></td></tr></tbody></table></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line1297">line 1297</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The database object. Useful for method chaining</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type"><a href="Database.html">Database</a></span></dd></dl></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><p class="code-caption">Register a custom sum function</p><div class="rel"><pre class="prettyprint"><code>        db.create_aggregate("js_sum", {
            init: () => 0,
            step: (state, value) => state + value,
            finalize: state => state
        });
        db.exec("SELECT js_sum(column1) FROM (VALUES (1), (2))"); // = 3

      </code></pre></div></div><h3 class="name has-anchor" id="%5B%22create_function%22%5D"><span class="type-signature"></span>["create_function"]<span class="signature">(name, func)</span><span class="type-signature"> &rarr; {<a href="Database.html">Database</a>}</span></h3><div class="description"><p>Register a custom function with SQLite</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>name</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><p>the name of the function as referenced in SQL statements.</p></td></tr><tr><td class="name"><code>func</code></td><td class="type"><span class="param-type">function</span></td><td class="description last"><p>the actual function to be executed.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line1231">line 1231</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The database object. Useful for method chaining</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type"><a href="Database.html">Database</a></span></dd></dl></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><p class="code-caption">Register a simple function</p><div class="rel"><pre class="prettyprint"><code>          db.create_function("addOne", function (x) {return x+1;})
          db.exec("SELECT addOne(1)") // = 2

      </code></pre></div></div><h3 class="name has-anchor" id="%5B%22each%22%5D"><span class="type-signature"></span>["each"]<span class="signature">(sql, params=<span class="signature-attributes">opt</span>, callback, done)</span><span class="type-signature"> &rarr; {<a href="Database.html">Database</a>}</span></h3><div class="description"><p>Execute an sql statement, and call a callback for each row of result.</p><pre><code>Currently this method is synchronous, it will not return until the callback
has been called on every row of the result. But this might change.
</code></pre></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>sql</code></td><td class="type"><span class="param-type">string</span></td><td class="attributes"></td><td class="description last"><p>A string of SQL text. Can contain placeholders that will be bound to the parameters given as the second argument</p></td></tr><tr><td class="name"><code>params=</code></td><td class="type"><span class="param-type"><a href="Statement.html#.BindParams">Statement.<wbr>BindParams</a></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>Parameters to bind to the query</p></td></tr><tr><td class="name"><code>callback</code></td><td class="type"><span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>Function to call on each row of result</p></td></tr><tr><td class="name"><code>done</code></td><td class="type"><span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>A function that will be called when all rows have been retrieved</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line1020">line 1020</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The database object. Useful for method chaining</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type"><a href="Database.html">Database</a></span></dd></dl></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><p class="code-caption">Read values from a table</p><div class="rel"><pre class="prettyprint"><code>    db.each("SELECT name,age FROM users WHERE age >= $majority", {$majority:18},
            function (row){console.log(row.name + " is a grown-up.")}
    );</code></pre></div></div><h3 class="name has-anchor" id="%5B%22exec%22%5D"><span class="type-signature"></span>["exec"]<span class="signature">(sql, params<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Array.&lt;<a href="Database.html#.QueryExecResult">Database.QueryExecResult</a>>}</span></h3><div class="description"><p>Execute an SQL query, and returns the result.</p><p>This is a wrapper against Database.prepare, Statement.bind, Statement.step, Statement.get, and Statement.free.</p><p>The result is an array of result elements. There are as many result elements as the number of statements in your sql string (statements are separated by a semicolon)</p><h2>Example use</h2><p>We will create the following table, named <em>test</em> and query it with a multi-line statement using params:</p><table><thead><tr><th style="text-align:center">id</th><th style="text-align:center">age</th><th style="text-align:center">name</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">Ling</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">18</td><td style="text-align:center">Paul</td></tr></tbody></table><p>We query it like that:</p><pre class="prettyprint source lang-javascript"><code>var db = new SQL.Database();
var res = db.exec(
    &quot;DROP TABLE IF EXISTS test;\n&quot;
    + &quot;CREATE TABLE test (id INTEGER, age INTEGER, name TEXT);&quot;
    + &quot;INSERT INTO test VALUES ($id1, :age1, @name1);&quot;
    + &quot;INSERT INTO test VALUES ($id2, :age2, @name2);&quot;
    + &quot;SELECT id FROM test;&quot;
    + &quot;SELECT age,name FROM test WHERE id=$id1&quot;,
    {
        &quot;$id1&quot;: 1, &quot;:age1&quot;: 1, &quot;@name1&quot;: &quot;Ling&quot;,
        &quot;$id2&quot;: 2, &quot;:age2&quot;: 18, &quot;@name2&quot;: &quot;Paul&quot;
    }
);
</code></pre><p><code>res</code> is now :</p><pre class="prettyprint source lang-javascript"><code>    [
        {&quot;columns&quot;:[&quot;id&quot;],&quot;values&quot;:[[1],[2]]},
        {&quot;columns&quot;:[&quot;age&quot;,&quot;name&quot;],&quot;values&quot;:[[1,&quot;Ling&quot;]]}
    ]
</code></pre></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>sql</code></td><td class="type"><span class="param-type">string</span></td><td class="attributes"></td><td class="description last"><p>a string containing some SQL text to execute</p></td></tr><tr><td class="name"><code>params</code></td><td class="type"><span class="param-type"><a href="Statement.html#.BindParams">Statement.<wbr>BindParams</a></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>When the SQL statement contains placeholders, you can pass them in here. They will be bound to the statement before it is executed. If you use the params argument as an array, you <strong>cannot</strong> provide an sql string that contains several statements (separated by <code>;</code>). This limitation does not apply to params as an object.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line945">line 945</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The results of each statement</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Array.&lt;<a href="Database.html#.QueryExecResult">Database.QueryExecResult</a>></span></dd></dl></div><h3 class="name has-anchor" id="%5B%22export%22%5D"><span class="type-signature"></span>["export"]<span class="signature">()</span><span class="type-signature"> &rarr; {Uint8Array}</span></h3><div class="description"><p>Exports the contents of the database to a binary array. This operation will close and re-open the database which will cause any pragmas to be set back to their default values.</p></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line1089">line 1089</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>An array of bytes of the SQLite3 database file</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Uint8Array</span></dd></dl></div><h3 class="name has-anchor" id="%5B%22getRowsModified%22%5D"><span class="type-signature"></span>["getRowsModified"]<span class="signature">()</span><span class="type-signature"> &rarr; {number}</span></h3><div class="description"><p>Returns the number of changed rows (modified, inserted or deleted) by the latest completed INSERT, UPDATE or DELETE statement on the database. Executing any other type of SQL statement does not modify the value returned by this function.</p></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line1154">line 1154</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>the number of rows modified</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">number</span></dd></dl></div><h3 class="name has-anchor" id="%5B%22handleError%22%5D"><span class="type-signature"></span>["handleError"]<span class="signature">()</span></h3><div class="description"><p>Analyze a result code, return null if no error occured, and throw an error with a descriptive message otherwise</p></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line1138">line 1138</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="%5B%22iterateStatements%22%5D"><span class="type-signature"></span>["iterateStatements"]<span class="signature">(sql)</span><span class="type-signature"> &rarr; {<a href="StatementIterator.html">StatementIterator</a>}</span></h3><div class="description"><p>Iterate over multiple SQL statements in a SQL string. This function returns an iterator over <a href="Statement.html">Statement</a> objects. You can use a for..of loop to execute the returned statements one by one.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>sql</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><p>a string of SQL that can contain multiple statements</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line1080">line 1080</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>the resulting statement iterator</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type"><a href="StatementIterator.html">StatementIterator</a></span></dd></dl></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><p class="code-caption">Get the results of multiple SQL queries</p><div class="rel"><pre class="prettyprint"><code>const sql_queries = "SELECT 1 AS x; SELECT '2' as y";
for (const statement of db.iterateStatements(sql_queries)) {
    const sql = statement.getSQL(); // Get the SQL source
    const result = statement.getAsObject({}); // Get the row of data
    console.log(sql, result);
}
// This will print:
// 'SELECT 1 AS x;' { x: 1 }
// " SELECT '2' as y" { y: '2' }</code></pre></div></div><h3 class="name has-anchor" id="%5B%22prepare%22%5D"><span class="type-signature"></span>["prepare"]<span class="signature">(sql, params<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="Statement.html">Statement</a>}</span></h3><div class="description"><p>Prepare an SQL statement</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>sql</code></td><td class="type"><span class="param-type">string</span></td><td class="attributes"></td><td class="description last"><p>a string of SQL, that can contain placeholders (<code>?</code>, <code>:VVV</code>, <code>:AAA</code>, <code>@AAA</code>)</p></td></tr><tr><td class="name"><code>params</code></td><td class="type"><span class="param-type"><a href="Statement.html#.BindParams">Statement.<wbr>BindParams</a></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>values to bind to placeholders</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line1048">line 1048</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Throws:</strong><dl><dt><div class="param-desc"><p>SQLite error</p></div></dt><dd></dd><dt><dl><dt>Type</dt><dd><span class="param-type">String</span></dd></dl></dt><dd></dd></dl></div><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>the resulting statement</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type"><a href="Statement.html">Statement</a></span></dd></dl></div><h3 class="name has-anchor" id="%5B%22run%22%5D"><span class="type-signature"></span>["run"]<span class="signature">(sql, params<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="Database.html">Database</a>}</span></h3><div class="description"><p>Execute an SQL query, ignoring the rows it returns.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>sql</code></td><td class="type"><span class="param-type">string</span></td><td class="attributes"></td><td class="description last"><p>a string containing some SQL text to execute</p></td></tr><tr><td class="name"><code>params</code></td><td class="type"><span class="param-type"><a href="Statement.html#.BindParams">Statement.<wbr>BindParams</a></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>When the SQL statement contains placeholders, you can pass them in here. They will be bound to the statement before it is executed. If you use the params argument, you <strong>cannot</strong> provide an sql string that contains several statements (separated by <code>;</code>)</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line860">line 860</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The database object (useful for method chaining)</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type"><a href="Database.html">Database</a></span></dd></dl></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>// Insert values in a table
    db.run(
        "INSERT INTO test VALUES (:age, :name)",
        { ':age' : 18, ':name' : 'John' }
    );

    </code></pre></div></div><h3 class="name has-anchor" id="%5B%22updateHook%22%5D"><span class="type-signature"></span>["updateHook"]<span class="signature">(callback)</span><span class="type-signature"> &rarr; {<a href="Database.html">Database</a>}</span></h3><div class="description"><p>Registers an update hook with SQLite.</p><p>Every time a row is changed by whatever means, the callback is called once with the change (<code>'insert'</code>, <code>'update'</code> or <code>'delete'</code>), the database name and table name where the change happened and the <a href="https://www.sqlite.org/rowidtable.html">rowid</a> of the row that has been changed.</p><p>The rowid is cast to a plain number. If it exceeds <code>Number.MAX_SAFE_INTEGER</code> (2^53 - 1), an error will be thrown.</p><p><strong>Important notes:</strong></p><ul><li>The callback <strong>MUST NOT</strong> modify the database in any way</li><li>Only a single callback can be registered at a time</li><li>Unregister the callback by passing <code>null</code></li><li>Not called for some updates like <code>ON REPLACE CONFLICT</code> and <code>TRUNCATE</code> (a <code>DELETE FROM</code> without a <code>WHERE</code> clause)</li></ul><p>See SQLite documentation on <a href="https://www.sqlite.org/c3ref/update_hook.html">sqlite3_update_hook</a> for more details</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>callback</code></td><td class="type"><span class="param-type"><a href="Database.html#~UpdateHookCallback">Database~UpdateHookCallback</a></span> |<wbr> <span class="param-type">null</span></td><td class="description last"><ul><li>Callback to be executed when a row changes. Takes the type of change, the name of the database, the name of the table, and the row id of the changed row.</li><li>Set to <code>null</code> to unregister.</li></ul></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line1464">line 1464</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The database object. Useful for method chaining</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type"><a href="Database.html">Database</a></span></dd></dl></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>// Create a database and table
var db = new SQL.Database();
db.exec(`
CREATE TABLE users (
  id INTEGER PRIMARY KEY, -- this is the rowid column
  name TEXT,
  active INTEGER
)
`);

// Register an update hook
var changes = [];
db.updateHook(function(operation, database, table, rowId) {
  changes.push({operation, database, table, rowId});
  console.log(`${operation} on ${database}.${table} row ${rowId}`);
});

// Insert a row - triggers the update hook with 'insert'
db.run("INSERT INTO users VALUES (1, 'Alice', 1)");
// Logs: "insert on main.users row 1"

// Update a row - triggers the update hook with 'update'
db.run("UPDATE users SET active = 0 WHERE id = 1");
// Logs: "update on main.users row 1"

// Delete a row - triggers the update hook with 'delete'
db.run("DELETE FROM users WHERE id = 1");
// Logs: "delete on main.users row 1"

// Unregister the update hook
db.updateHook(null);

// This won't trigger any callback
db.run("INSERT INTO users VALUES (2, 'Bob', 1)");</code></pre></div></div><h2 id="type-definitions" class="subsection-title has-anchor">Type Definitions</h2><h3 class="name has-anchor" id=".QueryExecResult">QueryExecResult</h3><div class="member-item-container flex"><strong>Type:</strong><ul><li><span class="param-type">Object</span></li></ul></div><b class="subsection-title">Properties</b><div class="allow-overflow"><table class="props"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>columns</code></td><td class="type"><span class="param-type">Array.&lt;string></span></td><td class="description last"><p>the name of the columns of the result (as returned by Statement.getColumnNames)</p></td></tr><tr><td class="name"><code>values</code></td><td class="type"><span class="param-type">Array.&lt;Array.&lt;<a href="Database.html#.SqlValue">Database.SqlValue</a>>></span></td><td class="description last"><p>one array per row, containing the column values</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line877">line 877</a></li></ul></dd></div></dl><h3 class="name has-anchor" id=".SqlValue">SqlValue</h3><div class="member-item-container flex"><strong>Type:</strong><ul><li><span class="param-type">string</span> |<wbr> <span class="param-type">number</span> |<wbr> <span class="param-type">null</span> |<wbr> <span class="param-type">Uint8Array</span></li></ul></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line286">line 286</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="~UpdateHookCallback"><span class="type-signature"></span>UpdateHookCallback<span class="signature">(operation, database, table, rowId)</span></h3><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>operation</code></td><td class="type"><span class="param-type">'insert'</span> |<wbr> <span class="param-type">'update'</span> |<wbr> <span class="param-type">'delete'</span></td><td class="description last"><ul><li>The type of change that occurred</li></ul></td></tr><tr><td class="name"><code>database</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><ul><li>The name of the database where the change occurred</li></ul></td></tr><tr><td class="name"><code>table</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><ul><li>The name of the database's table where the change occurred</li></ul></td></tr><tr><td class="name"><code>rowId</code></td><td class="type"><span class="param-type">number</span></td><td class="description last"><ul><li>The <a href="https://www.sqlite.org/rowidtable.html">rowid</a> of the changed row</li></ul></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="api.js.html">api.js</a>, <a href="api.js.html#line1524">line 1524</a></li></ul></dd></div></dl></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><a href="/" class="sidebar-title sidebar-title-anchor">sql.js</a><div class="mobile-nav-links"><div class="navbar-item"><a id="" href="https://sql.js.org/" target="">Website</a></div><div class="navbar-item"><a id="" href="https://github.com/sql-js/sql.js" target="">Github</a></div><div class="navbar-item"><a id="" href="https://sql.js.org/examples/GUI/" target="">Demo</a></div></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-modules"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-SqlJs.html">SqlJs</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="Database.html">Database</a></div><div class="sidebar-section-children"><a href="Statement.html">Statement</a></div><div class="sidebar-section-children"><a href="StatementIterator.html">StatementIterator</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#SqlJs">SqlJs</a></div><div class="sidebar-section-children"><a href="global.html#SqlJsConfig">SqlJsConfig</a></div><div class="sidebar-section-children"><a href="global.html#initSqlJs">initSqlJs</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>